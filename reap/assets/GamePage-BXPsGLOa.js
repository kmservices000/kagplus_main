import{l as u,j as g}from"./index-BNHGB2gs.js";import{g as D,b as L,L as G}from"./react-CmrxKclW.js";import{T as N}from"./TopNav-bwa1g0NZ.js";import{r as R}from"./phaser-zuK_9rBu.js";var $=R();const r=D($),T=(n,e,t,s="#2b1600")=>n.add.text(0,0,e,{fontFamily:"Inter, sans-serif",fontSize:`${t}px`,color:s,align:"center",wordWrap:{width:360}}),j=(n,e,t,s)=>{const i=s.accent??16765339,c=n.add.rectangle(0,0,s.width,s.height,i,.35).setOrigin(.5).setStrokeStyle(2,7093782,.4).setName("card-bg"),a=T(n,s.title,26).setOrigin(.5,.5);a.setName("card-title"),a.setY(-s.height*.18);const o=[c,a];if(s.subtitle){const l=T(n,s.subtitle,16,"#5f3b15").setOrigin(.5);l.setName("card-subtitle"),l.setY(-s.height*.02),o.push(l)}if(s.description){const l=T(n,s.description,14,"#4b371f").setOrigin(.5);l.setY(s.height*.22),l.setName("card-description"),o.push(l)}const d=n.add.container(e,t,o);return d.setSize(s.width,s.height),d.setData("accent",i),d.setInteractive(new r.Geom.Rectangle(-s.width/2,-s.height/2,s.width,s.height),r.Geom.Rectangle.Contains),d},W=(n,e)=>{const t=n.getByName("card-bg");if(!t)return;const s=n.getData("accent")??16765339;t.setFillStyle(s,e?.65:.25),t.setStrokeStyle(e?3:2,e?16743704:7093782,e?.9:.4)},f=(n,e,t,s)=>{const i=s.width??180,c=s.paddingX??20,a=s.color??16743704,o=n.add.rectangle(0,0,i,42,a,1).setOrigin(.5).setStrokeStyle(2,2036746,.65);o.setName("pill-bg");const d=n.add.text(0,0,s.text,{fontFamily:"Inter, sans-serif",fontSize:"18px",color:"#1f140a"}).setOrigin(.5),l=n.add.container(e,t,[o,d]);return l.setSize(i,42),l.setData("paddingX",c),l.setInteractive(new r.Geom.Rectangle(-i/2,-21,i,42),r.Geom.Rectangle.Contains),l.setData("accent",a),l.on("pointerover",()=>{o.setFillStyle(a,.8)}),l.on("pointerout",()=>{o.setFillStyle(a,1)}),l},H=(n,e)=>{const t=n.getByName("pill-bg"),s=n.getData("accent")??16743704;t&&(t.setFillStyle(e?s:16777215,e?1:.35),t.setStrokeStyle(2,e?s:2036746,.7))},K=[[r.Input.Keyboard.KeyCodes.UP,"up"],[r.Input.Keyboard.KeyCodes.DOWN,"down"],[r.Input.Keyboard.KeyCodes.LEFT,"left"],[r.Input.Keyboard.KeyCodes.RIGHT,"right"],[r.Input.Keyboard.KeyCodes.ENTER,"confirm"],[r.Input.Keyboard.KeyCodes.SPACE,"confirm"],[r.Input.Keyboard.KeyCodes.ESC,"back"],[r.Input.Keyboard.KeyCodes.BACKSPACE,"back"]],Q={0:"confirm",1:"back",2:"confirm",3:"back",9:"confirm",8:"back",12:"up",13:"down",14:"left",15:"right"};class b extends r.Events.EventEmitter{constructor(e){super(),this.scene=e,this.registerKeyboard(),e.input.gamepad&&e.input.gamepad.on("down",this.handlePadDown,this),e.events.once(r.Scenes.Events.DESTROY,this.destroy,this),e.events.once(r.Scenes.Events.SHUTDOWN,this.destroy,this)}keys=[];registerKeyboard(){this.scene.input.keyboard&&K.forEach(([e,t])=>{const s=this.scene.input.keyboard.addKey(e);s.on("down",()=>this.emitAction(t)),this.keys.push(s)})}handlePadDown(e,t,s){if(s===0)return;const i=Q[t.index];i&&this.emitAction(i)}emitAction(e){this.emit("action",e)}destroy(){this.keys.forEach(e=>{e?.destroy()}),this.keys=[],this.scene.input.gamepad&&this.scene.input.gamepad.off("down",this.handlePadDown,this),this.removeAllListeners()}}const w={profile:"reap.playerProfile",progress:"reap.moduleProgress"},M=new Map,E=typeof window<"u",V=n=>{if(E)try{const e=window.localStorage.getItem(n);if(e!==null)return e}catch(e){console.warn("Unable to read localStorage key",n,e)}return M.get(n)??null},_=(n,e)=>{if(E)try{window.localStorage.setItem(n,e)}catch(t){console.warn("Unable to persist localStorage key",n,t)}M.set(n,e)},F=n=>{const e=V(n);if(!e)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse stored value for",n,t),null}},q=(n,e)=>{_(n,JSON.stringify(e))},A=n=>({moduleId:n,stars:0,levelsCompleted:0,lastPlayed:0}),B=()=>F(w.progress)??{},U=n=>B()[n]??A(n),k=(n,e)=>{const t=B(),s={...A(n),...t[n],...e,moduleId:n,lastPlayed:e.lastPlayed??Date.now()};return t[n]=s,q(w.progress,t),s},O=()=>F(w.profile),z=n=>{q(w.profile,n)},h={Launcher:"LauncherScene",ModuleSelect:"ModuleSelectScene",Vocabulary:"GameVocabularyScene",Grammar:"GameGrammarScene",Reading:"ReadingChallengeScene",Settings:"SettingsScene"};class Y extends r.Scene{languagePills=[];selectedLanguageIndex=0;languageText;inputManager;profile=null;constructor(){super(h.Launcher)}preload(){this.load.image("launcher-bg","/reap_background.png")}create(){const{width:e,height:t}=this.scale,s=this.add.image(e/2,t/2,"launcher-bg");s.setDisplaySize(e,t),s.setAlpha(.9),this.add.rectangle(e/2,t/2,e*.9,t*.9,0,.15).setStrokeStyle(2,16777215,.2),this.profile=O(),this.add.text(e/2,30,"Remote Education: Access & Progress",{fontFamily:"Inter, sans-serif",color:"#fff",fontSize:"16px",letterSpacing:3}).setOrigin(.5,0),this.add.text(e/2,60,"Welcome back,",{fontFamily:"Playfair Display, serif",fontSize:"28px",color:"#ffffff"}).setOrigin(.5,0),this.add.text(e/2,102,this.profile?.name??"Learner",{fontFamily:"Playfair Display, serif",fontSize:"48px",color:"#ff9b3e"}).setOrigin(.5,0),this.add.text(e/2,160,"Ready to study and play?",{fontFamily:"Inter, sans-serif",fontSize:"18px",color:"#fff"}).setOrigin(.5),this.buildLanguageSelector(),this.buildLoginButtons(),this.inputManager=new b(this),this.inputManager.on("action",this.handleAction,this),this.events.once(r.Scenes.Events.SHUTDOWN,()=>{this.inputManager?.destroy()})}buildLanguageSelector(){const{width:e}=this.scale;this.add.text(e/2,210,"Choose a language",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#fff",letterSpacing:3}).setOrigin(.5);const s=e/2-180,i=250;this.languagePills=u.map((o,d)=>{const l=f(this,s+d*90,i,{text:o.label,width:110});return l.on("pointerdown",()=>this.selectLanguage(d)),l}),this.languageText=this.add.text(e/2,i+60,"",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#fff"}),this.languageText.setOrigin(.5);const c=this.profile?.preferredLanguage,a=c?u.findIndex(o=>o.id===c):0;this.selectedLanguageIndex=a>=0?a:0,this.updateLanguageState()}buildLoginButtons(){const{width:e,height:t}=this.scale;f(this,e/2-90,t-80,{text:"Teacher Login",width:160,color:16777215}).on("pointerdown",()=>this.showToast("Teacher dashboard syncs once online.")),f(this,e/2+90,t-80,{text:"Student Login",width:160,color:16743704}).on("pointerdown",()=>{this.scene.start(h.ModuleSelect,{languageId:u[this.selectedLanguageIndex].id})})}selectLanguage(e){this.selectedLanguageIndex=e,this.updateLanguageState()}updateLanguageState(){this.languagePills.forEach((s,i)=>H(s,i===this.selectedLanguageIndex));const e=u[this.selectedLanguageIndex];this.languageText.setText(`Currently previewing: ${e.label}`);const t={name:this.profile?.name??"Kayla",grade:this.profile?.grade??"6",section:this.profile?.section??"A",preferredLanguage:e.id};z(t),this.profile=t}handleAction(e){switch(e){case"left":case"up":this.rollLanguage(-1);break;case"right":case"down":this.rollLanguage(1);break;case"confirm":this.scene.start(h.ModuleSelect,{languageId:u[this.selectedLanguageIndex].id});break;case"back":this.showToast("Use Teacher Login or Student Login to continue.");break}}rollLanguage(e){const t=this.languagePills.length;this.selectedLanguageIndex=(this.selectedLanguageIndex+e+t)%t,this.updateLanguageState()}showToast(e){const t=this.add.text(this.scale.width/2,this.scale.height-30,e,{fontFamily:"Inter, sans-serif",fontSize:"14px",color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:{x:12,y:6}});t.setOrigin(.5),this.time.delayedCall(2e3,()=>t.destroy())}}const J="vocab-adventure",X="Vocabulary Adventure",Z=[{id:"noun-1",prompt:"Which word is a noun in the sentence ‘Lola Mercy cooks sweet bibingka.’?",options:["cooks","sweet","Lola Mercy","quickly"],answerIndex:2,concept:"Nouns label people, places, or things.",context:"Module 0.1.1 Examples"},{id:"verb-1",prompt:"Which word shows the action in ‘The noisy tricycle passed quickly’?",options:["tricycle","noisy","passed","quickly"],answerIndex:2,concept:"Verbs show action or state.",context:"Module 0.1.1 Examples"},{id:"adjective-1",prompt:"Select the adjective that describes a noun.",options:["teacher","bright","slowly","jumps"],answerIndex:1,concept:"Adjectives describe nouns.",context:"Module 0.1.1 Flow"},{id:"adverb-1",prompt:"Which option tells HOW the action happens?",options:["market","slowly","vegetables","dancer"],answerIndex:1,concept:"Adverbs describe verbs, adjectives, or adverbs.",context:"Step 4 Quiz"},{id:"parts-1",prompt:"Which part of speech can replace a noun so sentences avoid repeating names?",options:["Verb","Adverb","Pronoun","Adjective"],answerIndex:2,concept:"Pronouns stand in for nouns.",context:"Definition card"}],I={moduleId:J,title:X,questions:Z},ee="grammar-quest",te="Grammar Quest",se="Sentence construction, tense, and agreement based on Module 0 refresher and Module 1 lessons.",ne=[{id:"sva-1",prompt:"Choose the sentence with correct subject-verb agreement.",options:["The students studies before Academic English Writing class.","The students study before Academic English Writing class.","The student study before Academic English Writing class.","Students studying before Academic English Writing class."],answerIndex:1,hint:"Plural subjects pair with base verbs.",passageId:"plaza"},{id:"tense-1",prompt:"Select the verb that keeps the sentence in past tense: ‘Lolo ____ a letter yesterday.’",options:["writes","write","wrote","writing"],answerIndex:2,hint:"Past tense verbs often end with –ed or change form.",passageId:"fisher"},{id:"pronoun-1",prompt:"Which pronoun correctly replaces ‘the barangay captain’ in ‘I spoke to ___ yesterday’?",options:["she","them","him","it"],answerIndex:2,hint:"Barangay captain is a specific person.",passageId:"plaza"},{id:"sentence-1",prompt:"Choose the option that is a complete sentence.",options:["Running to school in the rain.","Because we studied.","The group presented their skit.","When the bell rang."],answerIndex:2,hint:"Sentences need a subject and verb that express a full idea.",passageId:"fisher"}],m={moduleId:ee,title:te,description:se,questions:ne},ie=[{id:"plaza",title:"Morning at the Plaza",text:"Learners gather around the plaza before class. The sari-sari store opens early, and a jeepney waits for passengers heading to school.",question:"Why do learners arrive early at the plaza?",options:["They need to catch the jeepney together.","They want to buy lunch immediately.","They are practicing a dance.","They are waiting for rain to stop."],answerIndex:0},{id:"fisher",title:"Rainy Day Story",text:"Kuya Jun is a young fisher who writes short notes about the weather. When dark clouds arrive, he reminds his siblings to review lessons indoors.",question:"What does Kuya Jun do when the sky turns dark?",options:["He sails anyway.","He writes about the weather and stays inside.","He sleeps all day.","He sells snacks at the market."],answerIndex:1}],v={passages:ie},oe=[{id:I.moduleId,title:"Vocabulary Adventure",subtitle:"Parts of Speech",description:"Nouns • Verbs • Adjectives • Adverbs",accent:16760202,scene:h.Vocabulary,totalLessons:I.questions.length},{id:m.moduleId,title:"Grammar Quest",subtitle:"Sentences & Agreement",description:"SVA • Verb tense • Pronouns",accent:12430079,scene:h.Grammar,totalLessons:m.questions.length},{id:"reading-challenge",title:"Reading Challenge",subtitle:"Short Passages",description:"Context clues • Comprehension check",accent:9688708,scene:h.Reading,totalLessons:v.passages.length}];class ae extends r.Scene{cards=[];selectedIndex=0;inputManager;languageId="english";constructor(){super(h.ModuleSelect)}init(e){e?.languageId?this.languageId=e.languageId:this.languageId=O()?.preferredLanguage??"english"}create(){const{width:e,height:t}=this.scale;this.add.rectangle(e/2,t/2,e,t,16709098,1).setStrokeStyle(2,16046004,1),this.add.text(e/2,30,"Choose what to practice",{fontFamily:"Playfair Display, serif",fontSize:"28px",color:"#2b1600"}).setOrigin(.5),this.add.text(e/2,70,`Language preview: ${this.languageId}`,{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15"}).setOrigin(.5);const s=210,i=e/2-s;this.cards=oe.map((a,o)=>{const d=U(a.id),l=`${a.description}
${d.levelsCompleted}/${a.totalLessons} rounds • ★ ${d.stars}`,S=j(this,i+s*o,t/2+30,{width:180,height:230,title:a.title,subtitle:a.subtitle,description:l,accent:a.accent});return S.setData("menu-item",a),S.on("pointerdown",()=>this.launchItem(o)),S.on("pointerover",()=>this.setSelectedIndex(o)),S}),this.setSelectedIndex(0),f(this,e/2,t-40,{text:"Profile & Settings",width:220,color:16777215}).on("pointerdown",()=>this.scene.start(h.Settings)),this.inputManager=new b(this),this.inputManager.on("action",this.handleAction,this)}handleAction(e){switch(e){case"left":case"up":this.setSelectedIndex((this.selectedIndex-1+this.cards.length)%this.cards.length);break;case"right":case"down":this.setSelectedIndex((this.selectedIndex+1)%this.cards.length);break;case"confirm":this.launchItem(this.selectedIndex);break;case"back":this.scene.start(h.Launcher);break}}setSelectedIndex(e){this.selectedIndex=e,this.cards.forEach((t,s)=>W(t,s===e))}launchItem(e){const t=this.cards[e].getData("menu-item");t&&this.scene.start(t.scene,{moduleId:t.id,languageId:this.languageId})}}class re extends r.Scene{questionIndex=0;selectedOptionIndex=0;optionContainers=[];questionText;progressText;feedbackText;isLocked=!1;score=0;moduleId=I.moduleId;inputManager;questions=I.questions;constructor(){super(h.Vocabulary)}init(e){e?.moduleId&&(this.moduleId=e.moduleId)}create(){const{width:e}=this.scale;this.add.rectangle(e/2,this.scale.height/2,e,this.scale.height,16643304,1),this.add.text(e/2,20,I.title,{fontFamily:"Playfair Display, serif",fontSize:"28px",color:"#2b1600"}).setOrigin(.5),this.progressText=this.add.text(e-20,20,"",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15"}).setOrigin(1,0),this.questionText=this.add.text(e/2,90,"",{fontFamily:"Inter, sans-serif",fontSize:"22px",color:"#2b1600",align:"center",wordWrap:{width:e*.8}}).setOrigin(.5),this.feedbackText=this.add.text(e/2,150,"",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15",align:"center",wordWrap:{width:e*.8}}).setOrigin(.5),this.buildOptionCards(),this.showQuestion(),f(this,e/2,this.scale.height-30,{text:"Back to menu",width:180,color:16777215}).on("pointerdown",()=>this.scene.start(h.ModuleSelect)),this.inputManager=new b(this),this.inputManager.on("action",this.handleAction,this),this.events.once(r.Scenes.Events.SHUTDOWN,()=>this.inputManager?.destroy())}buildOptionCards(){const{width:e}=this.scale,t=220,s=60,i=Math.max(...this.questions.map(c=>c.options.length));this.optionContainers=Array.from({length:i}).map((c,a)=>{const o=this.add.container(e/2,t+s*a),d=this.add.rectangle(0,0,e*.82,50,16777215,.95).setOrigin(.5).setStrokeStyle(2,2823680,.3).setName("option-bg"),l=this.add.text(0,0,"",{fontFamily:"Inter, sans-serif",fontSize:"18px",color:"#2b1600"}).setOrigin(.5).setName("option-label");return o.add([d,l]),o.setData("index",a),o.setSize(e*.82,50),o.setInteractive(new r.Geom.Rectangle(-e*.82*.5,-25,e*.82,50),r.Geom.Rectangle.Contains),o.on("pointerdown",()=>{this.selectedOptionIndex=a,this.updateOptionState(),this.isLocked||this.revealAnswer()}),o.on("pointerover",()=>{this.isLocked||(this.selectedOptionIndex=a,this.updateOptionState())}),o})}handleAction(e){if(this.isLocked&&e==="confirm"){this.nextQuestion();return}switch(e){case"up":this.selectedOptionIndex=(this.selectedOptionIndex-1+this.currentQuestion().options.length)%this.currentQuestion().options.length,this.updateOptionState();break;case"down":this.selectedOptionIndex=(this.selectedOptionIndex+1)%this.currentQuestion().options.length,this.updateOptionState();break;case"confirm":this.isLocked||this.revealAnswer();break;case"back":this.scene.start(h.ModuleSelect);break}}currentQuestion(){return this.questions[this.questionIndex]}showQuestion(){const e=this.currentQuestion();this.questionText.setText(e.prompt),this.progressText.setText(`Item ${this.questionIndex+1}/${this.questions.length}`),this.feedbackText.setText(e.context),this.selectedOptionIndex=0,this.isLocked=!1,this.optionContainers.forEach((t,s)=>{const i=t.getByName("option-bg"),c=t.getByName("option-label");s<e.options.length?(c.setText(e.options[s]),i.setVisible(!0),c.setVisible(!0)):(i.setVisible(!1),c.setVisible(!1))}),this.updateOptionState()}updateOptionState(){this.optionContainers.forEach((e,t)=>{const s=e.getByName("option-bg");if(!s.visible)return;const i=t===this.selectedOptionIndex;s.setFillStyle(i?16773848:16777215,i?1:.9),s.setStrokeStyle(2,i?16743704:2823680,i?.9:.3)})}revealAnswer(){const e=this.currentQuestion();if(this.selectedOptionIndex===e.answerIndex)this.score+=1,this.feedbackText.setText(`Great! ${e.concept}`);else{const s=e.options[e.answerIndex];this.feedbackText.setText(`Oops! ${e.concept}
Answer: ${s}`)}this.isLocked=!0,this.optionContainers.forEach((s,i)=>{const c=s.getByName("option-bg"),a=s.getByName("option-label");c.visible&&(i===e.answerIndex?(c.setFillStyle(13039317,1),a.setColor("#0f5132")):i===this.selectedOptionIndex?(c.setFillStyle(16766164,1),a.setColor("#842029")):(c.setFillStyle(16777215,.8),a.setColor("#2b1600")))})}nextQuestion(){this.isLocked&&(this.optionContainers.forEach(e=>{e.getByName("option-label").setColor("#2b1600")}),this.questionIndex+=1,this.questionIndex>=this.questions.length?this.endGame():this.showQuestion())}endGame(){const e=Math.min(3,Math.round(this.score/this.questions.length*3));k(this.moduleId,{stars:e,levelsCompleted:this.questions.length}),this.questionText.setText("Vocabulary adventure complete!"),this.feedbackText.setText(`You answered ${this.score} of ${this.questions.length} items correctly. Press Enter to return.`),this.progressText.setText("Finished"),this.isLocked=!1,this.inputManager?.removeAllListeners(),this.inputManager?.on("action",t=>{(t==="confirm"||t==="back")&&this.scene.start(h.ModuleSelect)})}}const ce=v.passages,le=n=>ce.find(e=>e.id===n);class he extends r.Scene{questionIndex=0;selectedOptionIndex=0;isLocked=!1;questionText;contextText;optionTexts=[];optionBackgrounds=[];progressText;feedbackText;score=0;moduleId=m.moduleId;inputManager;questions=m.questions;constructor(){super(h.Grammar)}init(e){e?.moduleId&&(this.moduleId=e.moduleId)}create(){const{width:e,height:t}=this.scale;this.add.rectangle(e/2,t/2,e,t,15985919,1),this.add.text(e/2,18,m.title,{fontFamily:"Playfair Display, serif",fontSize:"28px",color:"#35175a"}).setOrigin(.5,0),this.progressText=this.add.text(e-18,18,"",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#4d2c88"}).setOrigin(1,0),this.add.rectangle(e/2,120,e*.9,120,16777215,.9).setStrokeStyle(2,5057672,.3),this.contextText=this.add.text(e/2-e*.45+12,60,"",{fontFamily:"Inter, sans-serif",fontSize:"14px",color:"#4a3c6a",wordWrap:{width:e*.9-24}}).setOrigin(0,0),this.questionText=this.add.text(e/2,210,"",{fontFamily:"Inter, sans-serif",fontSize:"22px",color:"#2b1600",align:"center",wordWrap:{width:e*.85}}).setOrigin(.5);const i=270,c=55;for(let o=0;o<4;o+=1){const d=this.add.rectangle(e/2,i+c*o,e*.82,48,16777215,1).setStrokeStyle(2,3479386,.2).setInteractive({useHandCursor:!0});d.on("pointerdown",()=>this.selectOption(o));const l=this.add.text(e/2,i+c*o,"",{fontFamily:"Inter, sans-serif",fontSize:"18px",color:"#2b1600"}).setOrigin(.5).setInteractive({useHandCursor:!0});l.on("pointerdown",()=>this.selectOption(o)),this.optionBackgrounds.push(d),this.optionTexts.push(l)}this.feedbackText=this.add.text(e/2,t-90,m.description,{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#4a3c6a",align:"center",wordWrap:{width:e*.8}}).setOrigin(.5),f(this,e/2,t-35,{text:"Back to menu",width:190,color:16777215}).on("pointerdown",()=>this.scene.start(h.ModuleSelect)),this.showQuestion(),this.inputManager=new b(this),this.inputManager.on("action",this.handleAction,this),this.events.once(r.Scenes.Events.SHUTDOWN,()=>this.inputManager?.destroy())}handleAction(e){if(this.isLocked&&e==="confirm"){this.nextQuestion();return}switch(e){case"up":this.selectedOptionIndex=(this.selectedOptionIndex-1+this.currentQuestion().options.length)%this.currentQuestion().options.length,this.updateOptionHighlights();break;case"down":this.selectedOptionIndex=(this.selectedOptionIndex+1)%this.currentQuestion().options.length,this.updateOptionHighlights();break;case"confirm":this.isLocked||this.reveal();break;case"back":this.scene.start(h.ModuleSelect);break}}selectOption(e){this.optionBackgrounds[e].visible&&(this.selectedOptionIndex=e,this.updateOptionHighlights(),this.isLocked||this.reveal())}currentQuestion(){return this.questions[this.questionIndex]}showQuestion(){const e=this.currentQuestion();this.progressText.setText(`Item ${this.questionIndex+1}/${this.questions.length}`),this.questionText.setText(e.prompt);const t=le(e.passageId);t?this.contextText.setText(`${t.title}
${t.text}`):this.contextText.setText("Use your grammar clues!"),e.options.forEach((s,i)=>{this.optionTexts[i].setText(s),this.optionBackgrounds[i].setVisible(!0)});for(let s=e.options.length;s<this.optionTexts.length;s+=1)this.optionTexts[s].setText(""),this.optionBackgrounds[s].setVisible(!1);this.feedbackText.setText(e.hint),this.selectedOptionIndex=0,this.isLocked=!1,this.updateOptionHighlights()}updateOptionHighlights(){this.optionBackgrounds.forEach((e,t)=>{if(!e.visible)return;const s=t===this.selectedOptionIndex;e.setFillStyle(s?14800127:16777215,s?1:.95),e.setStrokeStyle(2,s?8146431:3479386,s?.9:.2),this.optionTexts[t].setColor(s?"#251041":"#2b1600")})}reveal(){const e=this.currentQuestion();this.selectedOptionIndex===e.answerIndex?(this.score+=1,this.feedbackText.setText("Correct! Keep the pattern going.")):this.feedbackText.setText(`Answer: ${e.options[e.answerIndex]}`),this.isLocked=!0,this.optionBackgrounds.forEach((s,i)=>{s.visible&&(i===e.answerIndex?(s.setFillStyle(13039317,1),this.optionTexts[i].setColor("#0f5132")):i===this.selectedOptionIndex?(s.setFillStyle(16766164,1),this.optionTexts[i].setColor("#842029")):(s.setFillStyle(16777215,.4),this.optionTexts[i].setColor("#2b1600")))})}nextQuestion(){if(this.questionIndex+=1,this.questionIndex>=this.questions.length){this.finish();return}this.optionTexts.forEach(e=>e.setColor("#2b1600")),this.showQuestion()}finish(){const e=Math.min(3,Math.round(this.score/this.questions.length*3));k(this.moduleId,{stars:e,levelsCompleted:this.questions.length}),this.questionText.setText("Grammar Quest complete!"),this.contextText.setText("Nice work conquering tenses and agreement!"),this.feedbackText.setText(`Score: ${this.score}/${this.questions.length}. Press Enter to return.`),this.optionBackgrounds.forEach(t=>t.setVisible(!1)),this.optionTexts.forEach(t=>t.setVisible(!1)),this.progressText.setText("Finished"),this.inputManager?.removeAllListeners(),this.inputManager?.on("action",t=>{(t==="confirm"||t==="back")&&this.scene.start(h.ModuleSelect)})}}const x=v.passages;class de extends r.Scene{passageIndex=0;selectedOptionIndex=0;isLocked=!1;inputManager;questionText;passageText;optionTexts=[];optionBackgrounds=[];feedbackText;progressText;score=0;moduleId="reading-challenge";constructor(){super(h.Reading)}create(){const{width:e,height:t}=this.scale;this.add.rectangle(e/2,t/2,e,t,15201791,1),this.add.text(e/2,18,"Reading Challenge",{fontFamily:"Playfair Display, serif",fontSize:"28px",color:"#13406a"}).setOrigin(.5,0),this.progressText=this.add.text(e-20,20,"",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#13406a"}).setOrigin(1,0),this.add.rectangle(e/2,120,e*.92,140,16777215,1).setStrokeStyle(2,1261674,.2),this.passageText=this.add.text(e/2-e*.46+12,50,"",{fontFamily:"Inter, sans-serif",fontSize:"15px",color:"#13406a",wordWrap:{width:e*.92-24}}).setOrigin(0,0),this.questionText=this.add.text(e/2,220,"",{fontFamily:"Inter, sans-serif",fontSize:"20px",color:"#0c2a42",align:"center",wordWrap:{width:e*.82}}).setOrigin(.5);const i=280,c=55;for(let o=0;o<4;o+=1){const d=this.add.rectangle(e/2,i+c*o,e*.82,48,16777215,1).setStrokeStyle(2,1261674,.2).setInteractive({useHandCursor:!0});d.on("pointerdown",()=>this.selectOption(o));const l=this.add.text(e/2,i+c*o,"",{fontFamily:"Inter, sans-serif",fontSize:"18px",color:"#0c2a42"}).setOrigin(.5).setInteractive({useHandCursor:!0});l.on("pointerdown",()=>this.selectOption(o)),this.optionBackgrounds.push(d),this.optionTexts.push(l)}this.feedbackText=this.add.text(e/2,t-90,"",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#13406a",align:"center",wordWrap:{width:e*.8}}).setOrigin(.5),f(this,e/2,t-35,{text:"Back to menu",width:180,color:16777215}).on("pointerdown",()=>this.scene.start(h.ModuleSelect)),this.showPassage(),this.inputManager=new b(this),this.inputManager.on("action",this.handleAction,this),this.events.once(r.Scenes.Events.SHUTDOWN,()=>this.inputManager?.destroy())}handleAction(e){if(this.isLocked&&e==="confirm"){this.nextPassage();return}switch(e){case"up":this.selectedOptionIndex=(this.selectedOptionIndex-1+this.currentPassage().options.length)%this.currentPassage().options.length,this.updateHighlight();break;case"down":this.selectedOptionIndex=(this.selectedOptionIndex+1)%this.currentPassage().options.length,this.updateHighlight();break;case"confirm":this.isLocked||this.reveal();break;case"back":this.scene.start(h.ModuleSelect);break}}selectOption(e){this.optionBackgrounds[e].visible&&(this.selectedOptionIndex=e,this.updateHighlight(),this.isLocked||this.reveal())}currentPassage(){return x[this.passageIndex]}showPassage(){const e=this.currentPassage();this.progressText.setText(`Card ${this.passageIndex+1}/${x.length}`),this.passageText.setText(`${e.title}
${e.text}`),this.questionText.setText(e.question),e.options.forEach((t,s)=>{this.optionTexts[s].setText(t),this.optionBackgrounds[s].setVisible(!0)});for(let t=e.options.length;t<this.optionTexts.length;t+=1)this.optionTexts[t].setText(""),this.optionBackgrounds[t].setVisible(!1);this.feedbackText.setText("Use text evidence to support your answer."),this.selectedOptionIndex=0,this.isLocked=!1,this.updateHighlight()}updateHighlight(){this.optionBackgrounds.forEach((e,t)=>{if(!e.visible)return;const s=t===this.selectedOptionIndex;e.setFillStyle(s?14086399:16777215,s?1:.95),e.setStrokeStyle(2,s?1010356:1261674,s?.9:.2),this.optionTexts[t].setColor(s?"#0a335a":"#0c2a42")})}reveal(){const e=this.currentPassage();this.selectedOptionIndex===e.answerIndex?(this.score+=1,this.feedbackText.setText("Reading check passed!")):this.feedbackText.setText(`Answer: ${e.options[e.answerIndex]}`),this.isLocked=!0,this.optionBackgrounds.forEach((s,i)=>{s.visible&&(i===e.answerIndex?(s.setFillStyle(13039317,1),this.optionTexts[i].setColor("#0f5132")):i===this.selectedOptionIndex?(s.setFillStyle(16766164,1),this.optionTexts[i].setColor("#842029")):(s.setFillStyle(16777215,.5),this.optionTexts[i].setColor("#0c2a42")))})}nextPassage(){if(this.passageIndex+=1,this.passageIndex>=x.length){this.finish();return}this.optionTexts.forEach(e=>e.setColor("#0c2a42")),this.showPassage()}finish(){const e=Math.min(3,Math.round(this.score/x.length*3));k(this.moduleId,{stars:e,levelsCompleted:x.length}),this.passageText.setText("Reading practice complete!"),this.questionText.setText("Great job using clues from the passage."),this.feedbackText.setText(`Score: ${this.score}/${x.length}. Press Enter to return.`),this.optionBackgrounds.forEach(t=>t.setVisible(!1)),this.optionTexts.forEach(t=>t.setVisible(!1)),this.progressText.setText("Finished"),this.inputManager?.removeAllListeners(),this.inputManager?.on("action",t=>{(t==="confirm"||t==="back")&&this.scene.start(h.ModuleSelect)})}}const y=["4","5","6","7","8"];class ge extends r.Scene{profile={name:"Kayla",grade:"6",section:"A",preferredLanguage:u[0].id};languageIndex=0;gradeIndex=2;languageText;gradeText;inputManager;constructor(){super(h.Settings)}create(){const e=O();if(e){this.profile=e;const i=u.findIndex(a=>a.id===e.preferredLanguage);this.languageIndex=i>=0?i:0;const c=y.findIndex(a=>a===e.grade);this.gradeIndex=c>=0?c:2}const{width:t,height:s}=this.scale;this.add.rectangle(t/2,s/2,t,s,16776175,1),this.add.text(t/2,30,"Profile & Settings",{fontFamily:"Playfair Display, serif",fontSize:"30px",color:"#2b1600"}).setOrigin(.5),this.add.text(t/2,70,"No internet needed — data saves locally on this device.",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15"}).setOrigin(.5),this.add.text(t/2-150,140,"Student name",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15"}).setOrigin(0,.5),this.add.text(t/2-150,180,this.profile.name,{fontFamily:"Playfair Display, serif",fontSize:"32px",color:"#ff7d18"}).setOrigin(0,.5),this.add.text(t/2-150,240,"Preferred language",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15"}).setOrigin(0,.5),this.languageText=this.add.text(t/2-150,280,"",{fontFamily:"Inter, sans-serif",fontSize:"28px",color:"#2b1600"}).setOrigin(0,.5),this.add.text(t/2-150,340,"Grade level",{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15"}).setOrigin(0,.5),this.gradeText=this.add.text(t/2-150,380,"",{fontFamily:"Inter, sans-serif",fontSize:"28px",color:"#2b1600"}).setOrigin(0,.5),this.updateLanguageDisplay(),this.updateGradeDisplay(),this.add.text(t/2,s-100,`Use ↑ ↓ to change language, ← → to switch grade.
Press Enter to save & return.`,{fontFamily:"Inter, sans-serif",fontSize:"16px",color:"#5f3b15",align:"center"}).setOrigin(.5),this.inputManager=new b(this),this.inputManager.on("action",this.handleAction,this),this.events.once(r.Scenes.Events.SHUTDOWN,()=>this.inputManager?.destroy())}handleAction(e){switch(e){case"up":this.languageIndex=(this.languageIndex-1+u.length)%u.length,this.updateLanguageDisplay();break;case"down":this.languageIndex=(this.languageIndex+1)%u.length,this.updateLanguageDisplay();break;case"left":this.gradeIndex=(this.gradeIndex-1+y.length)%y.length,this.updateGradeDisplay();break;case"right":this.gradeIndex=(this.gradeIndex+1)%y.length,this.updateGradeDisplay();break;case"confirm":case"back":this.persistProfile(),this.scene.start(h.ModuleSelect,{languageId:this.profile.preferredLanguage});break}}updateLanguageDisplay(){const e=u[this.languageIndex];this.languageText.setText(e.label),this.profile={...this.profile,preferredLanguage:e.id}}updateGradeDisplay(){const e=y[this.gradeIndex];this.gradeText.setText(`Grade ${e}`),this.profile={...this.profile,grade:e}}persistProfile(){z(this.profile)}}const ue=640,pe=480,fe=n=>({type:r.AUTO,width:ue,height:pe,parent:n,backgroundColor:"#fef9f1",scale:{mode:r.Scale.FIT,autoCenter:r.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},scene:[Y,ae,re,he,de,ge]});let p=null;const C=n=>{p&&(p.destroy(!0),p=null);const e=fe(n);return p=new r.Game(e),p},P=()=>{p&&(p.destroy(!0),p=null)},Ie=()=>{const n=L.useRef(null),e=()=>{P(),n.current&&C(n.current)};return L.useEffect(()=>{if(n.current)return C(n.current),()=>{P()}},[]),g.jsxs("div",{className:"page game-page",children:[g.jsx(N,{}),g.jsxs("section",{className:"game-shell",children:[g.jsxs("div",{className:"game-shell__copy",children:[g.jsx("p",{className:"eyebrow",children:"Offline Mode"}),g.jsx("h2",{children:"Play the REAP English Game Launcher"}),g.jsxs("p",{children:["Everything inside this playground runs on Phaser and bundles with Vite so the package keeps working even when opened via ",g.jsx("code",{children:"file://"})," or on an SD card."]}),g.jsxs("ul",{children:[g.jsx("li",{children:"Vocabulary Adventure — review parts of speech"}),g.jsx("li",{children:"Grammar Quest — sentence mastery"}),g.jsx("li",{children:"Reading Challenge — quick comprehension checks"})]}),g.jsxs("div",{className:"game-shell__actions",children:[g.jsx(G,{className:"primary-btn",to:"/english",children:"Back to Academic English Writing class"}),g.jsx("button",{className:"primary-btn ghost",type:"button",onClick:e,children:"Refresh game"})]})]}),g.jsx("div",{className:"game-frame",children:g.jsx("div",{ref:n,className:"game-frame__canvas"})})]})]})};export{Ie as default};
